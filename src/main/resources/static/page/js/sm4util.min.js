/**
* base64js
*/
/**
 * base64js
 * base64js.toByteArray(d.input)
 * base64js.fromByteArray(c);
 * @author c.z.s
 * @email 1048829253@qq.com
 * @company
 * @date 2018-07
 *
 */
(function(h){"object"===typeof exports&&"undefined"!==typeof module?module.exports=h():"function"===typeof define&&define.amd?define([],h):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).base64js=h()})(function(){return function e(g,a,b){function c(f,k){if(!a[f]){if(!g[f]){var l="function"==typeof require&&require;if(!k&&l)return l(f,!0);if(d)return d(f,!0);l=Error("Cannot find module '"+f+"'");throw l.code="MODULE_NOT_FOUND",l;}l=a[f]={exports:{}};g[f][0].call(l.exports,function(a){var b=g[f][1][a];return c(b?b:a)},l,l.exports,e,g,a,b)}return a[f].exports}for(var d="function"==typeof require&&require,f=0;f<b.length;f++)c(b[f]);return c}({"/":[function(e,g,a){function b(a){var b=a.length;if(0<b%4)throw Error("Invalid string. Length must be a multiple of 4");return"\x3d"===a[b-2]?2:"\x3d"===a[b-1]?1:0}function c(a,b,c){for(var f=[],k=b;k<c;k+=3)b=(a[k]<<16)+(a[k+1]<<8)+a[k+2],f.push(d[b>>18&63]+d[b>>12&63]+d[b>>6&63]+d[b&63]);return f.join("")}a.byteLength=function(a){return 3*a.length/4-b(a)};a.toByteArray=function(a){var c,d,e,k,g;c=a.length;k=b(a);g=new p(3*c/4-k);d=0<k?c-4:c;var n=0;for(c=0;c<d;c+=4)e=f[a.charCodeAt(c)]<<18|f[a.charCodeAt(c+1)]<<12|f[a.charCodeAt(c+2)]<<6|f[a.charCodeAt(c+3)],g[n++]=e>>16&255,g[n++]=e>>8&255,g[n++]=e&255;2===k?(e=f[a.charCodeAt(c)]<<2|f[a.charCodeAt(c+1)]>>4,g[n++]=e&255):1===k&&(e=f[a.charCodeAt(c)]<<10|f[a.charCodeAt(c+1)]<<4|f[a.charCodeAt(c+2)]>>2,g[n++]=e>>8&255,g[n++]=e&255);return g};a.fromByteArray=function(a){for(var b=a.length,f=b%3,e="",g=[],k=0,p=b-f;k<p;k+=16383)g.push(c(a,k,k+16383>p?p:k+16383));1===f?(a=a[b-1],e+=d[a>>2],e+=d[a<<4&63],e+="\x3d\x3d"):2===f&&(a=(a[b-2]<<8)+a[b-1],e+=d[a>>10],e+=d[a>>4&63],e+=d[a<<2&63],e+="\x3d");g.push(e);return g.join("")};var d=[],f=[],p="undefined"!==typeof Uint8Array?Uint8Array:Array;for(e=0;64>e;++e)d[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e],f["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(e)]=e;f[45]=62;f[95]=63},{}]},{},[])("/")});function SM4_Context(){this.mode=1;this.isPadding=!0;this.sk=Array(32)}function SM4(){this.SM4_ENCRYPT=1;this.SM4_DECRYPT=0;var h=[214,144,233,254,204,225,61,183,22,182,20,194,40,251,44,5,43,103,154,118,42,190,4,195,170,68,19,38,73,134,6,153,156,66,80,244,145,239,152,122,51,84,11,67,237,207,172,98,228,179,28,169,201,8,232,149,128,223,148,250,117,143,63,166,71,7,167,252,243,115,23,186,131,89,60,25,230,133,79,168,104,107,129,178,113,100,218,139,248,235,15,75,112,86,157,53,30,36,14,94,99,88,209,162,37,34,124,59,1,33,120,135,212,0,70,87,159,211,39,82,76,54,2,231,160,196,200,158,234,191,138,210,64,199,56,181,163,247,242,206,249,97,21,161,224,174,93,164,155,52,26,85,173,147,50,48,245,140,177,227,29,246,226,46,130,102,202,96,192,41,35,171,13,83,78,111,213,219,55,69,222,253,142,47,3,255,106,114,109,108,91,81,141,27,175,146,187,221,188,127,17,217,92,65,31,16,90,216,10,193,49,136,165,205,123,189,45,116,208,18,184,229,180,176,137,105,151,74,12,150,119,126,101,185,241,9,197,110,198,132,24,240,125,236,58,220,77,32,121,238,95,62,215,203,57,72],e=[2746333894,1453994832,1736282519,2993693404],g=[462357,472066609,943670861,1415275113,1886879365,2358483617,2830087869,3301692121,3773296373,4228057617,404694573,876298825,1347903077,1819507329,2291111581,2762715833,3234320085,3705924337,4177462797,337322537,808926789,1280531041,1752135293,2223739545,2695343797,3166948049,3638552301,4110090761,269950501,741554753,1213159005,1684763257];this.GET_ULONG_BE=function(a,b){return(a[b]&255)<<24|(a[b+1]&255)<<16|(a[b+2]&255)<<8|a[b+3]&255};this.PUT_ULONG_BE=function(a,b,c){var d=255&a>>24,f=255&a>>16,e=255&a>>8;a&=255;b[c]=128<d?d-256:d;b[c+1]=128<f?f-256:f;b[c+2]=128<e?e-256:e;b[c+3]=128<a?a-256:a};this.SHL=function(a,b){return(a&4294967295)<<b};this.ROTL=function(a,b){this.SHL(a,b);return this.SHL(a,b)|a>>32-b};this.sm4Lt=function(a){var b=Array(4),c=Array(4);this.PUT_ULONG_BE(a,b,0);c[0]=this.sm4Sbox(b[0]);c[1]=this.sm4Sbox(b[1]);c[2]=this.sm4Sbox(b[2]);c[3]=this.sm4Sbox(b[3]);a=this.GET_ULONG_BE(c,0);return a^this.ROTL(a,2)^this.ROTL(a,10)^this.ROTL(a,18)^this.ROTL(a,24)};this.sm4F=function(a,b,c,d,f){return a^this.sm4Lt(b^c^d^f)};this.sm4CalciRK=function(a){var b=Array(4),c=Array(4);this.PUT_ULONG_BE(a,b,0);c[0]=this.sm4Sbox(b[0]);c[1]=this.sm4Sbox(b[1]);c[2]=this.sm4Sbox(b[2]);c[3]=this.sm4Sbox(b[3]);a=this.GET_ULONG_BE(c,0);return a^this.ROTL(a,13)^this.ROTL(a,23)};this.sm4Sbox=function(a){a=h[a&255];return 128<a?a-256:a};this.sm4_setkey_enc=function(a,b){if(null==a)return alert("ctx is null!"),!1;if(null==b||16!=b.length)return alert("key error!"),!1;a.mode=this.SM4_ENCRYPT;this.sm4_setkey(a.sk,b)};this.sm4_setkey=function(a,b){var c=Array(4),d=Array(36);c[0]=this.GET_ULONG_BE(b,0);c[1]=this.GET_ULONG_BE(b,4);c[2]=this.GET_ULONG_BE(b,8);c[3]=this.GET_ULONG_BE(b,12);d[0]=c[0]^e[0];d[1]=c[1]^e[1];d[2]=c[2]^e[2];d[3]=c[3]^e[3];for(c=0;32>c;c++)d[c+4]=d[c]^this.sm4CalciRK(d[c+1]^d[c+2]^d[c+3]^g[c]),a[c]=d[c+4]};this.padding=function(a,b){if(null==a)return null;var c;if(b==this.SM4_ENCRYPT){var d=parseInt(16-a.length%16);c=a.slice(0);for(var f=0;f<d;f++)c[a.length+f]=d}else d=a[a.length-1],c=a.slice(0,a.length-d);return c};this.sm4_one_round=function(a,b,c){var d=0,f=Array(36);f[0]=this.GET_ULONG_BE(b,0);f[1]=this.GET_ULONG_BE(b,4);f[2]=this.GET_ULONG_BE(b,8);for(f[3]=this.GET_ULONG_BE(b,12);32>d;)f[d+4]=this.sm4F(f[d],f[d+1],f[d+2],f[d+3],a[d]),d++;this.PUT_ULONG_BE(f[35],c,0);this.PUT_ULONG_BE(f[34],c,4);this.PUT_ULONG_BE(f[33],c,8);this.PUT_ULONG_BE(f[32],c,12)};this.sm4_crypt_ecb=function(a,b){null==b&&alert("input is null!");a.isPadding&&a.mode==this.SM4_ENCRYPT&&(b=this.padding(b,this.SM4_ENCRYPT));for(var c=0,d=b.length,f=[];0<d;d-=16){var e=Array(16),g=b.slice(16*c,16*(c+1));this.sm4_one_round(a.sk,g,e);f=f.concat(e);c++}d=f;a.isPadding&&a.mode==this.SM4_DECRYPT&&(d=this.padding(d,this.SM4_DECRYPT));for(c=0;c<d.length;c++)0>d[c]&&(d[c]+=256);return d};this.sm4_crypt_cbc=function(a,b,c){null!=b&&16==b.length||alert("iv error!");null==c&&alert("input is null!");a.isPadding&&a.mode==this.SM4_ENCRYPT&&(c=this.padding(c,this.SM4_ENCRYPT));var d,f=c.length,e=[];if(a.mode==this.SM4_ENCRYPT)for(var g=0;0<f;f-=16){var h=Array(16),m=Array(16),q=c.slice(16*g,16*(g+1));for(d=0;16>d;d++)h[d]=q[d]^b[d];this.sm4_one_round(a.sk,h,m);b=m.slice(0,16);e=e.concat(m);g++}else for(var r,g=0;0<f;f-=16){h=Array(16);m=Array(16);q=c.slice(16*g,16*(g+1));r=q.slice(0,16);sm4_one_round(a.sk,q,h);for(d=0;16>d;d++)m[d]=h[d]^b[d];b=r.slice(0,16);e=e.concat(m);g++}b=e;a.isPadding&&a.mode==this.SM4_DECRYPT&&(b=this.padding(b,this.SM4_DECRYPT));for(d=0;d<b.length;d++)0>b[d]&&(b[d]+=256);return b}}function SM4Util(){this.secretKey="11HDESaAhiHHugDz";this.iv="";this.hexString=!1;this.encryptData_ECB=function(h){try{var e=new SM4,g=new SM4_Context;g.isPadding=!0;g.mode=e.SM4_ENCRYPT;var a=stringToByte(this.secretKey);e.sm4_setkey_enc(g,a);var b=e.sm4_crypt_ecb(g,stringToByte(h)),c=base64js.fromByteArray(b);null!=c&&0<c.trim().length&&c.replace(/(\s*|\t|\r|\n)/g,"");return c}catch(d){return console.error(d),null}};this.encryptData_CBC=function(h){try{var e=new SM4,g=new SM4_Context;g.isPadding=!0;g.mode=e.SM4_ENCRYPT;var a=stringToByte(this.secretKey),b=stringToByte(this.iv);e.sm4_setkey_enc(g,a);var c=e.sm4_crypt_cbc(g,b,stringToByte(h)),d=base64js.fromByteArray(c);null!=d&&0<d.trim().length&&d.replace(/(\s*|\t|\r|\n)/g,"");return d}catch(f){return console.error(f),null}};stringToByte=function(h){var e=[],g,a;g=h.length;for(var b=0;b<g;b++)a=h.charCodeAt(b),65536<=a&&1114111>=a?(e.push(a>>18&7|240),e.push(a>>12&63|128),e.push(a>>6&63|128),e.push(a&63|128)):2048<=a&&65535>=a?(e.push(a>>12&15|224),e.push(a>>6&63|128),e.push(a&63|128)):128<=a&&2047>=a?(e.push(a>>6&31|192),e.push(a&63|128)):e.push(a&255);return e};byteToString=function(h){if("string"===typeof h)return h;for(var e="",g=0;g<h.length;g++){var a=h[g].toString(2),b=a.match(/^1+?(?=0)/);if(b&&8==a.length){for(var a=b[0].length,b=h[g].toString(2).slice(7-a),c=1;c<a;c++)b+=h[c+g].toString(2).slice(2);e+=String.fromCharCode(parseInt(b,2));g+=a-1}else e+=String.fromCharCode(h[g])}return e}};