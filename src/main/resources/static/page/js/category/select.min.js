layui.use(["layer"],function(){layer=layui.layer;$tree=$("#tree");getChildNodes(0,rootId)});var $tree,isFirst=!1;function getChildNodes(b,d){var c=layer.load("\u52aa\u529b\u52a0\u8f7d\u4e2d\u2026");$.ajax({url:"/cg/category/"+d+"/children",dataType:"json",beforeSend:function(){},success:function(a){layer.close(c);a.isSuccess?(a=a.message,isFirst?$tree.treeview("addNodes",[b,{node:a}]):($tree.treeview({data:a,enableLinks:!1,onNodeSelected:function(a,b){},onNodeExpanded:function(a,b){getChildNodes(b.nodeId,b.id)}}),isFirst=!0)):ajaxError(a)},error:function(a){layer.close(c);ajaxError(a)}})}function getSelectCategoryData(){var b=$tree.treeview("getSelected",0);return b&&0<b.length?b[0]:null};