layui.use(["form"],function(){form=layui.form;myChart=echarts.init(document.getElementById("my-chart"));myChart.showLoading();$.get("http://127.0.0.1:8089/les_miserables.gexf",function(b){myChart.hideLoading();b=echarts.dataTool.gexf.parse(b);for(var a=[],c=0;9>c;c++)a[c]={name:"\u7c7b\u76ee"+c};b.nodes.forEach(function(a){a.itemStyle=null;a.symbolSize=10;a.value=a.symbolSize;a.category=a.attributes.modularity_class;a.x=a.y=null;a.draggable=!0});option={title:{text:"Les Miserables",subtext:"Default layout",top:"bottom",left:"right"},tooltip:{},legend:[{data:a.map(function(a){return a.name})}],animation:!1,series:[{name:"Les Miserables",type:"graph",layout:"force",data:b.nodes,links:b.links,categories:a,roam:!0,label:{position:"right"},force:{repulsion:100}}]};myChart.setOption(option)},"xml")});function bindReferrer(){var b=$("#referrer-code").val();if(isEmpty(b))layer.tips("\u8bf7\u5148\u586b\u5199\u6b63\u786e\u7684\u63a8\u8350\u7801","#referrer-code",{tips:[3,"#FFB800"],time:3E3});else{var a=layer.load(2,{shade:[.1,"#fff"]});$.ajax({type:"POST",url:"/my/manage/mall/referrer/bind",data:{code:b},dataType:"json",success:function(b){layer.close(a);b.success?(layer.msg(b.message+"\uff0c2\u79d2\u540e\u81ea\u52a8\u5237\u65b0"),reloadPage(2E3)):ajaxError(b)},error:function(b){layer.close(a);ajaxError(b)}})}}function buildReferrerCode(){var b=layer.load(2,{shade:[.1,"#fff"]});$.ajax({type:"POST",url:"/my/manage/mall/referrer/code",dataType:"json",success:function(a){layer.close(b);a.success?(layer.msg(a.message+" 2\u79d2\u540e\u81ea\u52a8\u5237\u65b0"),reloadPage(2E3)):ajaxError(a)},error:function(a){layer.close(b);ajaxError(a)}})};