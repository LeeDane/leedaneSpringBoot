layui.use(["layedit","form"],function(){form=layui.form;form.on("submit(send-password)",function(a){if(a.field.newpassword!=a.field.confirmpassword)return layer.tips("\u786e\u8ba4\u5bc6\u7801\u4e0d\u4e00\u81f4\uff01","#confirmpassword",{tips:[3,"#FFB800"],time:3E3}),!1;if(a.field.newpassword==a.field.password)return layer.tips("\u65b0\u5bc6\u7801\u8ddf\u65e7\u5bc6\u7801\u76f8\u540c\uff01","#newpassword",{tips:[3,"#FFB800"],time:3E3}),!1;var b=layer.load(2,{shade:[.1,"#fff"]});(new JSEncrypt).setPublicKey($("#publicKey").val());$.ajax({type:"PUT",url:"/us/user/pwd",data:{password:$.md5(a.field.password),new_password:$.md5(a.field.newpassword)},dataType:"json",success:function(a){layer.close(b);a.isSuccess?(layer.msg(a.message),reloadPage(2E3)):ajaxError(a)},error:function(a){ajaxError(a);layer.close(b)}});return!1})});