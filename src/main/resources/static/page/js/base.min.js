//对Date的扩展，将 Date 转化为指定格式的String
//月(M)、日(d)、小时(h)、分(m)、秒(s)、季度(q) 可以用 1-2 个占位符， 
//年(y)可以用 1-4 个占位符，毫秒(S)只能用 1 个占位符(是 1-3 位的数字) 
//例子： 
//(new Date()).Format("yyyy-MM-dd HH:mm:ss.S") ==> 2006-07-02 08:09:04.423
//(new Date()).Format("yyyy-M-d h:m:s.S")      ==> 2006-7-2 8:9:4.18
Date.prototype.Format=function(a){var b={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var c in b)(new RegExp("("+c+")")).test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a};function setTimeAgo(a){if(isEmpty(a))return"";a=new Date(a);if(!util)return a.Format("yy-MM-dd HH:mm");a=util.timeAgo(a);19==a.length&&(a=new Date(a),a=a.Format("yy-MM-dd HH:mm"));return a}function isEmptyObject(a){for(var b in a)return!1;return!0}function isEmpty(a){return"undefined"==typeof a||null==a||void 0==a||""==a||""==a.trim||"null"==a}function isNotEmpty(a){return!isEmpty(a)}function isLink(a){return/^((https|http|ftp|rtsp|mms)?:\/\/)+[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$/.test(a)}function changeNotNullString(a){return isEmpty(a)?"":a}function changeObjNotNullString(a,b){return"undefined"==typeof a||isEmpty(a[b])?"":a[b]}function deleteLastStr(a){return isEmpty(a)?a:a.substring(0,a.length-1)}function inJson(a,b){return a?isNotEmpty(a[b]):!1}function showSingleImg(a){a=$(a).attr("src");if(isNotEmpty(a)){var b={title:"\u76f8\u518c\u6807\u9898",id:0,start:0},c=[],d={};d.src=a;d.alt=a;c.push(d);b.data=c;layer.photos({photos:b,shift:1})}else layer.msg("\u65e0\u6cd5\u83b7\u53d6\u5f53\u524d\u56fe\u7247\u7684\u8def\u5f84")}function showImg(a,b){for(var c={title:"\u76f8\u518c\u6807\u9898",id:0,start:b},d=[],f=moods[a].imgs.split(";"),e=0;e<f.length;e++){var g={},h=f[e];g.src=h;g.alt=h;d.push(g)}c.data=d;layer.photos({photos:c,shift:1})}function serializeArrayToJsonObject(a){var b={};if(0<a.length)for(var c=0;c<a.length;c++){var d=a[c];b[d.name]=d.value}return b}function reloadPage(a){setTimeout("window.location.reload();",a)}function linkToLogin(){var a=window.location.href,a=isEmpty(a)?"":"?ref\x3d"+a;window.open("/lg"+a,"_self")}function openLink(a){isEmpty(a)?layer.msg("\u8981\u8df3\u8f6c\u7684\u94fe\u63a5\u4e0d\u80fd\u4e3a\u7a7a"):window.open(a,"_blank")}function linkTo404(a){a=isEmpty(a)?"":"?errorMessage\x3d"+a;window.open("/404"+a,"_self")}function linkTo403(){window.open("/403","_self")}function linkToMy(a){isEmpty(a)?layer.msg("\u8be5\u7528\u6237\u4e0d\u5b58\u5728\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u6838\u5b9e"):window.open("/my/"+a,"_self")}function linkToCircle(a){isEmpty(a)?layer.msg("\u8be5\u5708\u5b50\u4e0d\u5b58\u5728\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u6838\u5b9e"):window.open("/cc/"+a,"_self")}function linkToPostDetail(a,b){isEmpty(a)||isEmpty(b)?layer.msg("\u8be5\u5e16\u5b50\u4e0d\u5b58\u5728\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u6838\u5b9e"):window.open("/cc/"+a+"/post/"+b,"_self")}function linkToTable(a,b,c){"t_blog"==a?goToReadFull(b):"t_mood"==a?goToReadMoodFull(b,c):"t_circle_post"==a&&goToReadPostFull(b)}function linkToSearch(a){window.open("/s?q\x3d"+a+"\x26t\x3d"+Math.random(),"_blank")}function goToReadFull(a){isEmpty(a)?layer.msg("\u8be5\u535a\u5ba2\u4e0d\u5b58\u5728\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u6838\u5b9e"):window.open("/dt/"+a,"_blank")}function goToReadPostFull(a){isEmpty(a)?layer.msg("\u8be5\u5e16\u5b50\u4e0d\u5b58\u5728\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u6838\u5b9e"):window.open("/cc/post/dt/"+a,"_blank")}function goToReadMoodFull(a,b){isEmpty(a)?layer.msg("\u8be5\u5fc3\u60c5\u4e0d\u5b58\u5728\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u6838\u5b9e"):window.open("/user/"+b+"/mood/"+a+"/dt","_blank")}function linkToProduct(a){window.open("/mall/product/"+a+"/detail","_blank")}function addCookie(a,b){window.cookie=a+"\x3d"+b}function getCookie(a){return 0<document.cookie.length&&(c_start=document.cookie.indexOf(a+"\x3d"),-1!=c_start)?(c_start=c_start+a.length+1,c_end=document.cookie.indexOf(";",c_start),-1==c_end&&(c_end=document.cookie.length),unescape(document.cookie.substring(c_start,c_end))):""}function sortByObjectKey(a,b){return function(c,d){var f=c[a],e=d[a];return f<e?b?1:-1:f>e?b?-1:1:0}}function formatStringToDateFormattime(a){return a.replace("T"," ")+":00"}function formatDateTime(a){a=isNotEmpty(a)?new Date(a):new Date;return a.getFullYear()+"-"+fix(a.getMonth()+1,2)+"-"+fix(a.getDate(),2)+"T"+fix(a.getHours(),2)+":"+fix(a.getMinutes(),2)}function fix(a,b){return(""+a).length<b?(Array(b+1).join("0")+a).slice(-b):""+a}function getURLParam(a,b){a||(a=window.location.href);var c=(new RegExp("[\x26,?]"+b+"\x3d([^\\\x26]*)","i")).exec(a);return null==c?"":c[1]}function getRandomNumber(a){return Math.ceil(Math.random()*a)}function getRandomNumber1(a){return Math.floor(Math.random()*a)}function ajaxError(a){a=isJson(a)?a:eval("("+a.responseText+")");!a.message&&a.responseText&&(a.message=a.responseText);a.responseCode&&1001==a.responseCode?linkToLogin():a.responseCode&&404==a.responseCode?linkTo404(a.message):a.responseCode&&403==a.responseCode?linkTo403(a.message):a.message?layer.msg(a.message):a.responseCode?layer.msg("\u670d\u52a1\u5668\u5904\u7406\u5f02\u5e38\uff0c\u5f02\u5e38\u7f16\u7801\u662f\uff1a"+a.responseCode):a.responseCode?layer.msg("\u670d\u52a1\u5668\u5904\u7406\u5f02\u5e38"+a.responseCode):layer.msg("\u7f51\u7edc\u8fde\u63a5\u5931\u8d25\uff01")}function isJson(a){return"object"==typeof a&&"[object object]"==Object.prototype.toString.call(a).toLowerCase()&&!a.length}function jsonToGetRequestParams(a){var b="",c=0,d;for(d in a)c++;for(d in a)b=0==c-1?b+(d+"\x3d"+a[d]):b+(d+"\x3d"+a[d]+"\x26");return b}function doCallback(a,b){return a.apply(this,b)}function leeCloseModal(a){$(".lee-modal-bg").css("display","none")}function leeShowModal(a){$(".lee-modal-bg").css("display","block")}function getSupportTypeStr(a){return"\u76ee\u524d\u53ea\u652f\u6301png\u3001jpg\u3001jpeg\u3001gif\u3001mp4\u3001mp3\u7b49\u683c\u5f0f\u7684\u6587\u4ef6"}function isImg(a){if(a){a=a.replace("?imageslim","");var b=a.lastIndexOf(".");if(0<b&&(a=a.substring(b+1,a.length))&&("png"==a||"jpg"==a||"jpeg"==a||"gif"==a))return!0}return!1}function isVideo(a){if(a){a=a.replace("?imageslim","");var b=a.lastIndexOf(".");if(0<b&&(a=a.substring(b+1,a.length))&&"mp4"==a)return!0}return!1}function getVideoHtml(a){return isVideo?'\x3cvideo style\x3d"width: 100%; max-height: 500px; margin-top: 10px; margin-bottom: 10px;" src\x3d"'+changeNotNullString(a)+'" controls\x3d"controls"\x3eYour browser does not support the video tag.\x3c/video\x3e':""}function isAudio(a){if(a){a=a.replace("?imageslim","");var b=a.lastIndexOf(".");if(0<b&&(a=a.substring(b+1,a.length))&&"mp3"==a)return!0}return!1}function getAudioHtml(a){return isAudio?'\x3caudio style\x3d"width: 100%; max-height: 500px; margin-top: 10px; margin-bottom: 10px;" src\x3d"'+changeNotNullString(a)+'" controls\x3d"controls"\x3eYour browser does not support the audio tag.\x3c/audio\x3e':""}function scrollToPageTop(a){$("html,body").animate({scrollTop:0},a?a:500)}function formatFileSize(a){return a&&0<a?parseFloat(a/1024/1024).toFixed(2)+"M":a}function blockquote(a){return a?'\x3cdiv class\x3d"col-lg-12"\x3e'+recursive(a,"")+"\x3c/div\x3e":""}function recursive(a,b){if(!a||!a.item)return b;var c=a.item;b+="\x3cblockquote\x3e";0<c.id?(b+=c.source,b+="\x3csmall\x3e\x3ccite\x3e"+c.account+"\x3c/cite\x3e\x26nbsp;\x26nbsp;"+setTimeAgo(c.time)+"\x3c/small\x3e"):b+='\x3cspan style\x3d"color: #FF7F50; font-size: 12px;"\x3e'+c.source+"\x3c/span\x3e";return recursive(c,b)+"\x3c/blockquote\x3e"};