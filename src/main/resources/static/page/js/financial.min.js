layui.use(["layer"],function(){layer=layui.layer;chartPayments=echarts.init(document.getElementById("chart-payments"));chartCategorys=echarts.init(document.getElementById("chart-categorys"));chartTimes=echarts.init(document.getElementById("chart-times"));$(".navbar-nav .nav-main-li").each(function(){$(this).removeClass("active")});$(".nav-financial").addClass("active");$(".senior-condition-btn").click(function(){$(".senior-condition").toggle("fast")});$(".chart-or-list").click(function(){notifyChartOrListChange()});getOneCategorys();getLocations();queryPaging({t:Math.random()});$(window).scroll(function(a){a=a||window.event;if(a.wheelDelta){if(0<a.wheelDelta)return}else if(a.detail&&0<a.detail)return;a=$(document.body).height();var c=$(window).scrollTop();a=(a-winH-c)/winH;!isLoad&&.2>a&&canLoadData&&emptySearch&&!isChart&&(isLoad=!0,method="lowloading",queryPaging())})});var financials,OneCategorys,twoCategorys,locations,emptySearch=!0,last_id=0,last_addition_time="",method="firstloading",winH=$(window).height(),canLoadData=!0,isLoad=!1,isChart=!1,chartPayments,chartTimes,chartCategorys;window.addEventListener("resize",function(){chartPayments.resize();chartCategorys.resize();chartTimes.resize()});function notifyChartOrListChange(){(isChart=!isChart)?($(".chart-or-list").text("\u5207\u6362\u5217\u8868"),viewChart($(".chart-or-list"))):($(".chart-or-list").text("\u5207\u6362\u56fe\u8868"),viewList())}function getOneCategorys(){$.ajax({url:"/fn/category/ones",dataType:"json",beforeSend:function(){},success:function(a){a.isSuccess&&0<a.message.length?(oneCategorys=a.message,getTwoCategorys()):ajaxError(a)},error:function(a){ajaxError(a)}})}function getTwoCategorys(){$.ajax({url:"/fn/category/twos",dataType:"json",beforeSend:function(){},success:function(a){if(a.isSuccess)for(twoCategorys=a.message,$('[name\x3d"levels"]').append("\x3coption\x3e\u8bf7\u9009\u62e9\x3c/option\x3e"),a=0;a<twoCategorys.length;a++){for(var c="",b=0;b<oneCategorys.length;b++)if(twoCategorys[a].one_level_id==oneCategorys[b].id){c=oneCategorys[b].category_value;break}$('[name\x3d"levels"]').append("\x3coption\x3e"+c+"\x3e\x3e\x3e"+twoCategorys[a].category_value+"\x3c/option\x3e")}else ajaxError(a)},error:function(a){ajaxError(a)}})}function getLocations(){$.ajax({url:"/fn/locations/all",dataType:"json",beforeSend:function(){},success:function(a){a.isSuccess?locations=a.message:ajaxError(a)},error:function(a){ajaxError(a)}})}function querySearch(a){var c=layer.load("\u52aa\u529b\u52a0\u8f7d\u4e2d\u2026");$.ajax({url:"/fn/query?"+jsonToGetRequestParams(a),dataType:"json",beforeSend:function(){isChart=!0},success:function(a){layer.close(c);if(a.isSuccess){$(".financial-list-row").remove();financials=a.message;if(0==a.message.length)layer.msg("\u65e0\u66f4\u591a\u6570\u636e");else for(var b=0;b<a.message.length;b++)buildEachRow(a.message[b],b);notifyChartOrListChange()}else ajaxError(a)},error:function(a){layer.close(c);ajaxError(a)}})}function getQueryPagingParaams(){var a=15;"firstloading"!=method&&(a=10);return{pageSize:a,last_id:last_id,last_addition_time:last_addition_time,method:method,t:Math.random()}}function queryPaging(a){var c=layer.load("\u52aa\u529b\u52a0\u8f7d\u4e2d\u2026");$.ajax({url:"/fn/financials?"+jsonToGetRequestParams(getQueryPagingParaams()),dataType:"json",beforeSend:function(){isChart=!0},success:function(a){layer.close(c);if(a.isSuccess){if(0==a.message.length){canLoadData=!1;layer.msg("\u65e0\u66f4\u591a\u6570\u636e");notifyChartOrListChange();return}if("firstloading"==method){$(".financial-list-row").remove();financials=a.message;for(var b=0;b<financials.length;b++)buildEachRow(financials[b],b),b==financials.length-1&&(last_id=financials[b].id,last_addition_time=financials[b].addition_time)}else for(var e=financials.length,b=0;b<a.message.length;b++)financials.push(a.message[b]),buildEachRow(a.message[b],e),b==a.message.length-1&&(last_id=a.message[b].id,last_addition_time=a.message[b].addition_time);notifyChartOrListChange()}else ajaxError(a);isLoad=!1},error:function(a){layer.close(c);isLoad=!1;ajaxError(a)}})}function buildEachRow(a,c){var b="",b=a.has_img&&isNotEmpty(a.path)?b+('\x3cdiv class\x3d"row financial-list-row"\x3e\x3cdiv class\x3d"col-lg-2"\x3e\x3cimg width\x3d"100%" height\x3d"160" class\x3d"img-rounded hand" alt\x3d"" src\x3d"'+a.path+'"  onclick\x3d"showSingleImg(this);"/\x3e\x3c/div\x3e\x3cdiv class\x3d"col-lg-9"\x3e\x3cdiv class\x3d"row" style\x3d"font-family: \'\u5fae\u8f6f\u96c5\u9ed1\'; font-size: 15px; margin-top: 10px;"\x3e\x3cdiv class\x3d"col-lg-4"\x3e'+a.one_level+"\x3e\x3e"+a.two_level+'\x3c/div\x3e\x3cdiv class\x3d"col-lg-3"\x3e\u91d1\u989d\uff1a\u00a5 '+a.money+'\x3c/div\x3e\x3cdiv class\x3d"col-lg-5"\x3e\u8bb0\u8d26\u65f6\u95f4\uff1a'+a.addition_time+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"row" style\x3d"font-family: \'\u5b8b\u4f53\'; font-size: 15px;margin-top: 5px;"\x3e\x3cdiv class\x3d"col-lg-12"\x3e'+changeNotNullString(a.location)+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"row" style\x3d"font-family: \'\u5fae\u8f6f\u96c5\u9ed1\'; font-size: 17px;margin-top: 5px;"\x3e\x3cdiv class\x3d"col-lg-12"\x3e'+changeNotNullString(a.financial_desc)+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"row" style\x3d"font-family: \'\u5b8b\u4f53\'; font-size: 12px;margin-top: 5px; color: gray;"\x3e\x3cdiv class\x3d"col-lg-12"\x3e\u521b\u5efa\u65f6\u95f4\uff1a'+a.create_time+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"row" style\x3d"font-family: \'\u5b8b\u4f53\'; font-size: 12px;margin-top: 5px; color: gray;"\x3e\x3cdiv class\x3d"col-lg-12"\x3e\u72b6\u6001\uff1a'+(1==a.status?"\u6b63\u5e38":0==a.status?"\u7981\u7528":"\u5220\u9664")+'\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"col-lg-1"\x3e\x3cdiv class\x3d"row" style\x3d"margin-top: 10px; text-align: right;"\x3e\x3cbutton type\x3d"button" class\x3d"btn btn-primary" onclick\x3d"editFinancial('+c+');"\x3e\u7f16\u8f91\x3c/button\x3e\x3c/div\x3e\x3cdiv class\x3d"row" style\x3d"margin-top: 10px; text-align: right;"\x3e\x3cbutton type\x3d"button" class\x3d"btn btn-primary" onclick\x3d"deleteFinancial('+c+');"\x3e\u5220\u9664\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'):b+('\x3cdiv class\x3d"row financial-list-row"\x3e\x3cdiv class\x3d"col-lg-11"\x3e\x3cdiv class\x3d"row" style\x3d"font-family: \'\u5fae\u8f6f\u96c5\u9ed1\'; font-size: 15px;"\x3e\x3cdiv class\x3d"col-lg-4"\x3e'+a.one_level+"\x3e\x3e"+a.two_level+'\x3c/div\x3e\x3cdiv class\x3d"col-lg-3"\x3e\u91d1\u989d\uff1a\u00a5 '+a.money+'\x3c/div\x3e\x3cdiv class\x3d"col-lg-5"\x3e\u8bb0\u8d26\u65f6\u95f4\uff1a'+a.addition_time+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"row" style\x3d"font-family: \'\u5b8b\u4f53\'; font-size: 15px;margin-top: 5px;"\x3e\x3cdiv class\x3d"col-lg-12"\x3e'+changeNotNullString(a.location)+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"row" style\x3d"font-family: \'\u5fae\u8f6f\u96c5\u9ed1\'; font-size: 15px;margin-top: 5px;"\x3e\x3cdiv class\x3d"col-lg-12"\x3e'+changeNotNullString(a.financial_desc)+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"row" style\x3d"font-family: \'\u5b8b\u4f53\'; font-size: 12px;margin-top: 5px; color: gray;"\x3e\x3cdiv class\x3d"col-lg-12"\x3e\u521b\u5efa\u65f6\u95f4\uff1a'+a.create_time+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"row" style\x3d"font-family: \'\u5b8b\u4f53\'; font-size: 12px;margin-top: 5px; color: gray;"\x3e\x3cdiv class\x3d"col-lg-12"\x3e\u72b6\u6001\uff1a'+(1==a.status?"\u6b63\u5e38":0==a.status?"\u7981\u7528":"\u5220\u9664")+'\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"col-lg-1"\x3e\x3cdiv class\x3d"row" style\x3d"margin-top: 10px; text-align: right;"\x3e\x3cbutton type\x3d"button" class\x3d"btn btn-primary" onclick\x3d"editFinancial('+c+');"\x3e\u7f16\u8f91\x3c/button\x3e\x3c/div\x3e\x3cdiv class\x3d"row" style\x3d"margin-top: 10px; text-align: right;"\x3e\x3cbutton type\x3d"button" class\x3d"btn btn-primary" onclick\x3d"deleteFinancial('+c+');"\x3e\u5220\u9664\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e');$(".main-container").append(b)}function search(){emptySearch=!0;var a={};a.t=Math.random();var c=$('[name\x3d"searchKey"]').val();isNotEmpty(c)&&(emptySearch=!1,a.key=c);c=$('[name\x3d"startTime"]').val();isNotEmpty(c)&&(emptySearch=!1,a.start=c);c=$('[name\x3d"endTime"]').val();isNotEmpty(c)&&(emptySearch=!1,a.end=c);c=$('[name\x3d"levels"]').val();isNotEmpty(c)&&"\u8bf7\u9009\u62e9"!=c&&(emptySearch=!1,a.levels=c);emptySearch?(last_id=0,last_addition_time="",method="firstloading",queryPaging()):querySearch(a)}function editFinancial(a){"undefined"!=typeof financials&&0<financials.length&&financials.length>a&&buildEditUserinfo(financials[a])}function deleteFinancial(a){"undefined"!=typeof financials&&0<financials.length&&financials.length>a&&layer.confirm("\u60a8\u8981\u5220\u9664\u8be5\u6761\u8bb0\u5f55\u5417\uff1f",{btn:["\u786e\u5b9a","\u70b9\u9519\u4e86"]},function(){var c=layer.load("\u52aa\u529b\u52a0\u8f7d\u4e2d\u2026");$.ajax({type:"delete",url:"/fn/financial?fid\x3d"+financials[a].id,dataType:"json",beforeSend:function(){},success:function(a){layer.close(c);a.isSuccess?(layer.msg("\u8bb0\u8d26\u4fe1\u606f\u5220\u9664\u6210\u529f,1\u79d2\u949f\u540e\u81ea\u52a8\u5237\u65b0"),setTimeout("window.location.reload();",1E3)):ajaxError(a)},error:function(a){layer.close(c);ajaxError(a)}})},function(){})}function buildEditUserinfo(a){var c='\x3cform role\x3d"form" data-id\x3d"'+changeObjNotNullString(a,"id")+'" class\x3d"myForm"\x3e\x3cdiv class\x3d"form-group"\x3e\x3clabel for\x3d"sex"\x3e\u8bb0\u8d26\u6a21\u578b\x3c/label\x3e\x3cselect class\x3d"form-control" name\x3d"model"  onchange\x3d"modelChange(this)"\x3e',c="undefined"!=typeof a&&1==a.model?c+"\x3coption\x3e\u652f\u51fa\x3c/option\x3e\x3coption selected\x3e\u6536\u5165\x3c/option\x3e":c+"\x3coption selected\x3e\u652f\u51fa\x3c/option\x3e\x3coption\x3e\u6536\u5165\x3c/option\x3e",c=c+'\x3c/select\x3e\x3c/div\x3e\x3cdiv class\x3d"form-group"\x3e\x3clabel for\x3d"sex"\x3e\u8bb0\u8d26\u5206\u7c7b\x3c/label\x3e\x3cselect class\x3d"form-control" name\x3d"category"\x3e'+('\x3c/select\x3e\x3c/div\x3e\x3cdiv class\x3d"form-group"\x3e\x3clabel for\x3d"birth_day"\x3e\u91d1\u989d\x3c/label\x3e\x3cinput type\x3d"number" class\x3d"form-control" name\x3d"money" value\x3d"'+changeObjNotNullString(a,"money")+'"\x3e\x3c/div\x3e\x3cdiv class\x3d"form-group"\x3e\x3clabel for\x3d"qq"\x3e\u8bb0\u8d26\u65f6\u95f4\x3c/label\x3e\x3cinput type\x3d"datetime-local" class\x3d"form-control" name\x3d"additionTime" placeholder\x3d"\u8bf7\u70b9\u51fb\u9009\u62e9\u65f6\u95f4" value\x3d"'+formatDateTime(changeObjNotNullString(a,"addition_time"))+'"\x3e\x3c/div\x3e\x3cdiv class\x3d"form-group"\x3e\x3clabel for\x3d"mobile_phone"\x3e\u4f4d\u7f6e\x3c/label\x3e\x3cselect class\x3d"form-control" name\x3d"location"\x3e');if(void 0!=locations)for(var c=c+"\x3coption\x3e\u8bf7\u9009\u62e9\x3c/option\x3e",b=0;b<locations.length;b++)c="undefined"!=typeof a&&isNotEmpty(a.location)&&locations[b].location==a.location?c+("\x3coption selected\x3e"+locations[b].location+"\x3c/option\x3e"):c+("\x3coption\x3e"+locations[b].location+"\x3c/option\x3e");c+='\x3c/select\x3e\x3c/div\x3e\x3cdiv class\x3d"form-group"\x3e\x3clabel for\x3d"personal_introduction"\x3e\u63cf\u8ff0\u4fe1\u606f\x3c/label\x3e\x3ctextarea class\x3d"form-control" name\x3d"financialDesc" placeholder\x3d"\u8bf7\u8f93\u5165\u8be6\u7ec6\u63cf\u8ff0\u4fe1\u606f"\x3e'+changeObjNotNullString(a,"financial_desc")+'\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"form-group"\x3e\x3clabel for\x3d"qq"\x3e\u56fe\u7247\u94fe\u63a5\x3c/label\x3e\x3cinput type\x3d"text" class\x3d"form-control" name\x3d"image" placeholder\x3d"\u56fe\u7247\u94fe\u63a5(\u4e3a\u7a7a\u8868\u793a\u6ca1\u6709\u56fe\u7247)" value\x3d"'+changeObjNotNullString(a,"path")+'"\x3e\x3c/div\x3e\x3c/form';$(".modal-body-edit-financialinfo").html(c);$("#edit-financial-info").modal("show");"undefined"!=typeof a?changeModel(a.model,a.one_level+"\x3e\x3e\x3e"+a.two_level):changeModel(2,null)}function modelChange(a){"\u6536\u5165"==$(a).val()?changeModel(1):changeModel(2)}function changeModel(a,c){var b="";if(void 0!=twoCategorys)for(var d=0;d<twoCategorys.length;d++){for(var e="",g=0;g<oneCategorys.length;g++)if(oneCategorys[g].model==a&&twoCategorys[d].one_level_id==oneCategorys[g].id){e=oneCategorys[g].category_value;break}isNotEmpty(e)&&(e=e+"\x3e\x3e\x3e"+twoCategorys[d].category_value,b="undefined"!=typeof c&&c==e?b+("\x3coption selected\x3e"+e+"\x3c/option\x3e"):b+("\x3coption\x3e"+e+"\x3c/option\x3e"))}$('[name\x3d"category"]').html(b)}function addInfo(){buildEditUserinfo()}function editInfo(a){var c={};buildParams(a,c)&&(a={},a.data=JSON.stringify(c),a.t=Math.random(),doAddOrEdit(a))}function doAddOrEdit(a){$.ajax({type:"post",data:a,url:"/fn/financial",dataType:"json",beforeSend:function(){},success:function(a){a.isSuccess?(layer.msg("\u4fee\u6539\u8bb0\u8d26\u4fe1\u606f\u6210\u529f,1\u79d2\u949f\u540e\u81ea\u52a8\u5237\u65b0"),setTimeout("window.location.reload();",1E3)):layer.msg(a.message)},error:function(){layer.msg("\u7f51\u7edc\u8bf7\u6c42\u5931\u8d25")}})}function buildParams(a,c){var b=$('[name\x3d"model"]').val();if(isEmpty(b))return layer.msg("\u8bb0\u8d26\u6a21\u578b\u4e0d\u80fd\u4e3a\u7a7a"),$('[name\x3d"model"]').focus(),!1;c.model="\u6536\u5165"==b?1:2;b=$('[name\x3d"category"]').val();"\u8bf7\u9009\u62e9"!=b&&(b=b.split("\x3e\x3e\x3e"),c.one_level=b[0],c.two_level=b[1]);b=$('[name\x3d"money"]').val();if(isEmpty(b))return layer.msg("\u91d1\u989d\u4e0d\u80fd\u4e3a\u7a7a"),$('[name\x3d"money"]').focus(),!1;c.money=b;b=$('[name\x3d"additionTime"]').val();if(isEmpty(b))return layer.msg("\u8bb0\u8d26\u65f6\u95f4\u4e0d\u80fd\u4e3a\u7a7a"),$('[name\x3d"additionTime"]').focus(),!1;c.addition_time=formatStringToDateFormattime(b);b=$('[name\x3d"location"]').val();"\u8bf7\u9009\u62e9"!=b&&(c.location=b);b=$('[name\x3d"financialDesc"]').val();isNotEmpty(b)&&(c.financial_desc=b);b=$(a).closest(".modal").find("form").attr("data-id");isNotEmpty(b)&&(c.id=parseInt(b));b=$('[name\x3d"image"]').val();isNotEmpty(b)&&(c.has_img=!0,c.path=b);c.status=1;return!0}var bartType,endTime,startTime,additionTimeSubstringStart,additionTimeSubstringEnd,incomeTotal=0,spendTotal=0,mapCategorys={};function viewChart(a){$(".financial-list-row").addClass("hide");$(".financial-chart").removeClass("hide");"undefined"!=typeof financials&&0<financials.length&&(spendTotal=incomeTotal=0,mapCategorys={},buildChartInitData(),createPiePaymentsChart(),createPieCategorysChart(),createBarChart());chartPayments.resize();chartCategorys.resize();chartTimes.resize()}function buildChartInitData(){for(var a=new Set,c=new Set,b=new Set,d,e=0;e<financials.length;e++)d=financials[e],a.add(d.addition_time.substring(0,4)),c.add(d.addition_time.substring(5,7)),b.add(d.addition_time.substring(8,10)),1==d.model?incomeTotal+=d.money:spendTotal+=d.money,mapCategorys[d.two_level]=d.two_level in mapCategorys?mapCategorys[d.two_level]+d.money:d.money;incomeTotal=incomeTotal.toFixed(2);spendTotal=spendTotal.toFixed(2);1<a.size?(barType=2,endTime=financials[0].addition_time.substring(0,4)+"\u5e74",startTime=financials[financials.length-1].addition_time.substring(0,4)+"\u5e74",additionTimeSubstringStart=0,additionTimeSubstringEnd=4):1<c.size?(barType=1,endTime=financials[0].addition_time.substring(0,4)+"\u5e74"+financials[0].addition_time.substring(5,7)+"\u6708",startTime=financials[financials.length-1].addition_time.substring(0,4)+"\u5e74"+financials[financials.length-1].addition_time.substring(5,7)+"\u6708",additionTimeSubstringStart=5,additionTimeSubstringEnd=7):1<b.size?(barType=0,endTime=financials[0].addition_time.substring(5,7)+"\u6708"+financials[0].addition_time.substring(8,10)+"\u65e5",startTime=financials[financials.length-1].addition_time.substring(5,7)+"\u6708"+financials[financials.length-1].addition_time.substring(8,10)+"\u65e5",additionTimeSubstringStart=8,additionTimeSubstringEnd=10):(barType=3,endTime=financials[0].addition_time.substring(8,10)+"\u65e5"+financials[0].addition_time.substring(11,13)+"\u65f6",startTime=financials[financials.length-1].addition_time.substring(8,10)+"\u65e5"+financials[financials.length-1].addition_time.substring(11,13)+"\u65f6",additionTimeSubstringStart=11,additionTimeSubstringEnd=13)}function createBarChart(){for(var a=new Set,c=0;c<financials.length;c++)a.add(parseInt(financials[c].addition_time.substring(additionTimeSubstringStart,additionTimeSubstringEnd)));var b=[];setToArray(a,b);b.sort(sortArray(!1));a=[];for(c=0;c<b.length;c++){var d="";switch(barType){case 0:d="\u65e5";break;case 1:d="\u6708";break;case 2:d="\u5e74";break;case 3:d="\u65f6"}a.push(b[c]+d)}for(var d=[],e=[],g={},l={},h=0;h<b.length;h++)for(var f=b[h],c=0;c<financials.length;c++){var k=financials[c];f==k.addition_time.substring(additionTimeSubstringStart,additionTimeSubstringEnd)&&(1==k.model?g[f]=f in g?k.money+g[f]:k.money:l[f]=f in l?k.money+l[f]:k.money)}for(h=0;h<b.length;h++)f=b[h],f in g?d.push(g[f].toFixed(2)):d.push(0),f in l?e.push(l[f].toFixed(2)):e.push(0);chartTimes.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["\u6536\u5165","\u652f\u51fa"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:a}],yAxis:[{type:"value"}],series:[{name:"\u6536\u5165",type:"bar",data:d},{name:"\u652f\u51fa",type:"bar",data:e}]})}function setToArray(a,c){a.forEach(function(a,d,e){c.push(a)})}function sortArray(a){return function(c,b){return c<b?a?1:-1:c>b?a?-1:1:0}}function createPiePaymentsChart(){var a={title:{text:"\u603b\u6536\u5165\uff1a"+incomeTotal+"\u5143\uff0c\u603b\u6d88\u8d39\uff1a"+spendTotal+"\u5143",subtext:"\u4ece"+startTime+"\u81f3"+endTime,top:20},legend:{data:["\u603b\u6536\u5165","\u603b\u652f\u51fa"]},tooltip:{trigger:"item",formatter:"{a} \x3cbr/\x3e{b} : {c} ({d}%)"},series:[{name:"\u4ece"+startTime+"\u81f3"+endTime+"\u6536\u652f\u7edf\u8ba1",type:"pie",radius:"55%",center:["50%","50%"],data:[{value:incomeTotal,name:"\u603b\u6536\u5165"},{value:spendTotal,name:"\u603b\u652f\u51fa"}].sort(function(a,b){return a.value-b.value}),roseType:"angle",label:{normal:{textStyle:{color:"rgba(255, 255, 255, 0.3)"}}},labelLine:{normal:{lineStyle:{color:"rgba(255, 255, 255, 0.3)"},smooth:.2,length:10,length2:20}},itemStyle:{normal:{color:"#c23531",shadowBlur:200,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};chartPayments.setOption(a)}function createPieCategorysChart(){var a=[],c=[],b;for(b in mapCategorys)c.push(b),a.push({name:b,value:mapCategorys[b].toFixed(2)});a.sort(sortByObjectKey("value",!0));b=10<a.length?10:a.length;for(var d=[],e=0;e<b;e++)d.push(a[e]);chartCategorys.setOption({title:{text:"\u4e8c\u7ea7\u5206\u7c7bTop10",subtext:"\u4ece"+startTime+"\u81f3"+endTime,x:"center"},tooltip:{trigger:"item",formatter:"{a} \x3cbr/\x3e{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:c},series:[{name:"\u4e8c\u7ea7\u5206\u7c7bTop10\u7edf\u8ba1",type:"pie",radius:"55%",center:["50%","60%"],data:d,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})}function viewList(){$(".financial-chart").addClass("hide");$(".financial-list-row").removeClass("hide")};